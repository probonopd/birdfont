language: cpp
compiler: gcc
sudo: require
dist: xenial

before_install:
  - sudo apt-get update -qq

install:
  - sudo apt-get -y install valac python3-doit libxmlbird-dev libgee-0.8-dev libglib2.0-dev libgtk-3-dev libwebkit2gtk-4.0-dev libnotify-dev libsqlite3-dev

script:
  - ./configure --prefix=/usr
  - ./build.py
  - sudo ./install.py

after_success:
  - wget -c https://github.com/probonopd/uploadtool/raw/master/upload.sh
  - bash upload.sh Birdfont*.AppImage*
  
branches:
  except:
    - # Do not build tags that we create when we upload to GitHub Releases
    - /^(?i:continuous)/
